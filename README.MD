**artifact: hotel-booking-service-README**  
**type: text/markdown**  
**title: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–µ–ª–µ–π**


# –°–µ—Ä–≤–∏—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–µ–ª–µ–π üè®

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏ –æ—Ç–µ–ª–µ–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π: 
Spring Boot, PostgreSQL, MongoDB, Apache Kafka –∏ Docker. –ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é 
—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Å–æ–±—ã—Ç–∏–π, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π.

---

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- **Docker** –∏ **Docker Compose** –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.
- **Java 17+** –∏ **Gradle** –¥–ª—è —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞.
- –î–æ—Å—Ç—É–ø –∫ –ø–æ—Ä—Ç–∞–º: `5432` (PostgreSQL), `5050` (pgAdmin), `27017` (MongoDB), `9092` (Kafka).

---

## üõ† –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **PostgreSQL**: –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è—Ö, –æ—Ç–µ–ª—è—Ö –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö.
- **MongoDB**: –°–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è).
- **Apache Kafka**: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
- **Zookeeper**: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –¥–ª—è Kafka.
- **PgAdmin**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ PostgreSQL —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É —á–µ—Ä–µ–∑ Docker:
```bash
docker-compose -f docker/docker-compose.yaml up -d
```
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤:
```bash
docker ps --format "table {{.Names}}\t{{.Status}}"
```

### 2. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
./gradlew bootRun
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–†–æ–ª–∏**: `ROLE_ADMIN` (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–µ–ª—è–º–∏/–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏), `ROLE_USER` (–ø—Ä–æ—Å–º–æ—Ç—Ä).
- **–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π**:
```bash
curl -u admin:password http://localhost:8080/api/v1/hotels
```

---

## üì° –ü—Ä–∏–º–µ—Ä—ã API

### –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (POST `/api/v1/bookings`)
```http
POST /api/v1/bookings HTTP/1.1
Content-Type: application/json

{
  "userId": 1,
  "roomId": 1,
  "checkIn": "2024-10-01",
  "checkOut": "2024-10-05"
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ—Ç–µ–ª–µ–π (GET `/api/v1/hotels`)
```java
// –ü—Ä–∏–º–µ—Ä —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
HotelFilter filter = new HotelFilter(
  null, "Grand", null, "Paris", 
  null, 5, List.of(4, 5), null
);
Page<Hotel> hotels = hotelRepository.findAll(filter.toSpecification(), pageable);
```

---

## üìä Kafka –≤ –¥–µ–π—Å—Ç–≤–∏–∏
–°–æ–±—ã—Ç–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏:
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–æ–ø–∏–∫ `user_registration`).
- –°–æ–∑–¥–∞–Ω–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (—Ç–æ–ø–∏–∫ `room_booking`).

**–ü—Ä–∏–º–µ—Ä –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è Kafka**:
```java
@KafkaListener(topics = "user_registration", groupId = "hotel_service")
public void handleRegistration(KafkaUserRegistrationEvent event) {
  log.info("–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {}", event.getUserId());
  statisticsService.saveUserRegistration(event);
}
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç Testcontainers –¥–ª—è –ø–æ–¥–Ω—è—Ç–∏—è PostgreSQL.  
–ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞:
```java
@Test
@WithMockUser(roles = "ADMIN")
void testCreateHotel() {
  HotelDto dto = new HotelDto("Plaza", "–õ—É—á—à–∏–π –æ—Ç–µ–ª—å", "–ú–æ—Å–∫–≤–∞", 2);
  mockMvc.perform(post("/api/v1/hotels").content(toJson(dto)))
    .andExpect(status().isCreated());
}
```

---

## üéØ –ò—Ç–æ–≥
–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç:
- –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å Docker.
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–±—ã—Ç–∏–π —á–µ—Ä–µ–∑ Kafka.
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–æ–ª–µ–π.
- –ì–∏–±–∫—É—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ JPA Specifications.

–î–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –∏–ª–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ Issues –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.  
**Happy coding!** üë®üíªüë©üíª
```